{"version":3,"sources":["components/Home.tsx"],"names":["useStyles","makeStyles","theme","alert","margin","spacing","paddingTop","getWebpDetectSeverity","detected","webp","webpLossless","webpAlpha","getWebpDetectDesc","t","result","useIframeStyle","iframe","breakpoints","down","width","height","up","InfoInternalDialog","props","classes","open","onClose","title","className","src","url","InfoInternal","color","onClick","Home","useTheme","layoutClasses","useLayoutStyles","interactiveClasses","useInteractiveStyles","useTranslation","useCachedData","informations","useState","gameNewsTag","setGameNewsTag","setOpen","info","setInfo","useEffect","document","setDetected","Number","Modernizr","webplossless","webpalpha","isUpMd","useMediaQuery","columns","field","headerName","renderCell","params","data","browseType","target","href","path","sortable","valueFormatter","Date","getValue","toLocaleString","sortDirection","variant","header","content","maxWidth","severity","rel","fontSize","i18nKey","components","s","container","value","onChange","e","v","scrollButtons","label","style","pagination","autoPageSize","rows","filter","informationTag"],"mappings":"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","file":"static/js/20.e3a3d7ee.chunk.js","sourcesContent":["import {\n  Dialog,\n  IconButton,\n  Link,\n  makeStyles,\n  Paper,\n  Tab,\n  Tabs,\n  // Theme,\n  Typography,\n  Container,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport { useLayoutStyles } from \"../styles/layout\";\nimport { useInteractiveStyles } from \"../styles/interactive\";\nimport { ColDef, DataGrid, ValueFormatterParams } from \"@material-ui/data-grid\";\nimport {\n  GitHub,\n  OpenInNew,\n  Settings,\n  Translate,\n  Twitter,\n} from \"@material-ui/icons\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { TFunction } from \"i18next\";\nimport { Discord } from \"mdi-material-ui\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { IUserInformationInfo } from \"../types\";\nimport { useCachedData } from \"../utils\";\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    margin: theme.spacing(2, 0),\n  },\n  \"contact-link\": {\n    margin: theme.spacing(0, 0.5),\n  },\n  \"game-news-title\": {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\ninterface IDetectResult {\n  webp: number;\n  webpLossless: number;\n  webpAlpha: number;\n}\n\nfunction getWebpDetectSeverity(detected: IDetectResult) {\n  const sum = detected.webp + detected.webpLossless + detected.webpAlpha;\n  switch (sum) {\n    case -3:\n      return \"info\";\n    case 0:\n      return \"error\";\n    case 3:\n      return \"success\";\n    default:\n      return \"warning\";\n  }\n}\n\nfunction getWebpDetectDesc(t: TFunction, result: number) {\n  switch (result) {\n    case -1:\n      return t(\"common:detect.checking\");\n    case 0:\n      return t(\"common:detect.unsupported\");\n    case 1:\n      return t(\"common:detect.supported\");\n    default:\n      return \"\";\n  }\n}\n\nconst useIframeStyle = makeStyles((theme) => ({\n  iframe: {\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"300px\",\n      height: \"480px\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"600px\",\n      height: \"480px\",\n    },\n  },\n}));\n\nfunction InfoInternalDialog(props: {\n  url: string;\n  open: boolean;\n  onClose: (event: {}, reason: \"backdropClick\" | \"escapeKeyDown\") => void;\n  title: string;\n}) {\n  const classes = useIframeStyle();\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <Typography>{props.title}</Typography>\n      <iframe\n        className={classes.iframe}\n        title={props.title}\n        src={props.url}\n      ></iframe>\n    </Dialog>\n  );\n}\n\nfunction InfoInternal(props: { onClick: () => void }) {\n  return (\n    <IconButton color=\"primary\" onClick={props.onClick}>\n      <OpenInNew></OpenInNew>\n    </IconButton>\n  );\n}\n\nfunction Home() {\n  const theme = useTheme();\n  const classes = useStyles();\n  const layoutClasses = useLayoutStyles();\n  const interactiveClasses = useInteractiveStyles();\n  const { t } = useTranslation();\n\n  const [informations] = useCachedData<IUserInformationInfo>(\n    \"userInformations\"\n  );\n\n  const [gameNewsTag, setGameNewsTag] = useState<string>(\"information\");\n  const [open, setOpen] = useState<boolean>(false);\n  const [info, setInfo] = useState<IUserInformationInfo>();\n\n  useEffect(() => {\n    document.title = t(\"common:home\") + \" | Sekai Viewer\";\n  }, [t]);\n\n  const [detected, setDetected] = useState<IDetectResult>({\n    webp: -1,\n    webpLossless: -1,\n    webpAlpha: -1,\n  });\n\n  useEffect(() => {\n    setDetected({\n      webp: Number(Modernizr.webp),\n      webpLossless: Number(Modernizr.webplossless),\n      webpAlpha: Number(Modernizr.webpalpha),\n    });\n  }, []);\n\n  const isUpMd = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  const columns: ColDef[] = [\n    {\n      field: \"action\",\n      headerName: t(\"home:game-news.action\"),\n      width: 80,\n      renderCell: (params: ValueFormatterParams) => {\n        const info = params.data as IUserInformationInfo;\n        return info.browseType === \"internal\" ? (\n          <InfoInternal\n            onClick={() => {\n              setInfo(info);\n              setOpen(true);\n            }}\n          />\n        ) : (\n          <Link target=\"_blank\" href={info.path}>\n            <IconButton color=\"primary\">\n              <OpenInNew></OpenInNew>\n            </IconButton>\n          </Link>\n        );\n      },\n      sortable: false,\n    },\n    // { field: \"id\", headerName: \"ID\", width: 60 },\n    {\n      field: \"startAt\",\n      headerName: t(\"home:game-news.show-from\"),\n      width: 180,\n      valueFormatter: (params: ValueFormatterParams) =>\n        new Date(params.getValue(\"startAt\") as number).toLocaleString(),\n      sortDirection: \"desc\",\n    },\n    {\n      field: \"title\",\n      headerName: t(\"home:game-news.title-column\"),\n      width: isUpMd ? 400 : 150,\n      sortable: false,\n    },\n    {\n      field: \"endAt\",\n      headerName: t(\"home:game-news.show-until\"),\n      width: 180,\n      valueFormatter: (params: ValueFormatterParams) =>\n        new Date(params.getValue(\"startAt\") as number).toLocaleString(),\n    },\n  ];\n\n  return (\n    <Fragment>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"common:home\")}\n      </Typography>\n      <Container className={layoutClasses.content} maxWidth=\"md\">\n        {/* <Typography variant=\"h4\">Welcome to Sekai Viewer Open Beta!</Typography> */}\n        <Alert className={classes.alert} severity=\"info\">\n          {t(\"home:alert0\")}\n        </Alert>\n        <Alert className={classes.alert} severity=\"info\">\n          <AlertTitle>{t(\"home:alert_contributor.title\")}</AlertTitle>\n          <ul>\n            <li>\n              <Link\n                href=\"https://github.com/NonSpicyBurrito\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <GitHub fontSize=\"inherit\"></GitHub>\n                Burrito\n              </Link>\n            </li>\n            <li>\n              <Link\n                href=\"https://github.com/iSwanGit\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <GitHub fontSize=\"inherit\"></GitHub>\n                iSwanGit (EleMas*)\n              </Link>\n            </li>\n            <li>\n              <Link\n                href=\"https://github.com/Build774\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <GitHub fontSize=\"inherit\"></GitHub>\n                Build774\n              </Link>\n            </li>\n          </ul>\n        </Alert>\n        <Alert className={classes.alert} severity=\"info\">\n          <AlertTitle>{t(\"home:alert_translate.title\")}</AlertTitle>\n          <ul>\n            <li>简：Stargazing Koishi</li>\n            <li>繁：Natsuzawa, ch ko</li>\n            <li>日：Passion, Cee, k0tayan, Natsuzawa, Build774, tofutofuo</li>\n            <li>한：hodubidu3095, omitooshi, EleMas39, PJSEKAI</li>\n            <li>Pt-BR: mid</li>\n            <li>русский: Spyrohat</li>\n          </ul>\n          <Trans\n            i18nKey=\"home:alert_settings\"\n            components={{ s: <Settings fontSize=\"inherit\" /> }}\n          />\n        </Alert>\n        <Alert className={classes.alert} severity=\"warning\">\n          <AlertTitle>{t(\"home:alert1.title\")}</AlertTitle>\n          <Link\n            href=\"https://www.transifex.com/dnaroma/sekai-viewer\"\n            target=\"_blank\"\n          >\n            <Translate fontSize=\"inherit\"></Translate>\n            {t(\"home:alert1.translation\")}\n          </Link>\n          （English，简中，繁中，日本語，한국어，Deutsch, Español, others upon\n          request）\n          <br></br>\n          <Link\n            href=\"https://github.com/Sekai-World/sekai-viewer\"\n            target=\"_blank\"\n          >\n            <GitHub fontSize=\"inherit\"></GitHub>\n            {t(\"home:alert1.development\")}\n          </Link>\n          （Sekai-World/sekai-viewer）\n          <br></br>\n          {t(\"home:alert1.contact\")}:\n          <Link\n            href=\"https://www.twitter.com/miku_zura\"\n            target=\"_blank\"\n            className={classes[\"contact-link\"]}\n          >\n            <Twitter fontSize=\"inherit\"></Twitter>\n            @miku_zura\n          </Link>\n          <Link href=\"#\" className={classes[\"contact-link\"]}>\n            <Discord fontSize=\"inherit\"></Discord>\n            DNARoma#0646\n          </Link>\n          <br></br>\n          {t(\"home:alert1.join-discord\")}\n          <Link\n            href=\"https://discord.gg/xcDBRMd\"\n            target=\"_blank\"\n            className={classes[\"contact-link\"]}\n          >\n            <Discord fontSize=\"inherit\"></Discord>\n            Sekai Viewer\n          </Link>\n        </Alert>\n        <Alert\n          className={classes.alert}\n          severity={getWebpDetectSeverity(detected)}\n        >\n          <AlertTitle>WebP {t(\"common:support\")}</AlertTitle>\n          <ul>\n            <li>WebP: {getWebpDetectDesc(t, detected.webp)}</li>\n            <li>\n              WebP Lossless: {getWebpDetectDesc(t, detected.webpLossless)}\n            </li>\n            <li>WebP Alpha: {getWebpDetectDesc(t, detected.webpAlpha)}</li>\n          </ul>\n          {getWebpDetectSeverity(detected) === \"success\" ? (\n            <Typography>{t(\"home:detect.success\")}</Typography>\n          ) : (\n            <Typography>\n              Unfortunately you will not able to load images normally. Please\n              consider update your browser version or use a modern browser. More\n              info:\n              <Link href=\"https://caniuse.com/webp\">\n                Can I Use - WebP image format\n              </Link>\n            </Typography>\n          )}\n        </Alert>\n      </Container>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"home:game-news.title\")}\n      </Typography>\n      <Container className={layoutClasses.content} maxWidth=\"md\">\n        <Paper className={interactiveClasses.container}>\n          <Tabs\n            value={gameNewsTag}\n            onChange={(e, v) => setGameNewsTag(v)}\n            variant=\"scrollable\"\n            scrollButtons=\"desktop\"\n          >\n            <Tab label={t(\"common:information\")} value=\"information\"></Tab>\n            <Tab label={t(\"common:event\")} value=\"event\"></Tab>\n            <Tab label={t(\"common:gacha\")} value=\"gacha\"></Tab>\n            <Tab label={t(\"common:music\")} value=\"music\"></Tab>\n            <Tab label={t(\"common:campaign\")} value=\"campaign\"></Tab>\n            <Tab label={t(\"common:bug\")} value=\"bug\"></Tab>\n            <Tab label={t(\"common:update\")} value=\"update\"></Tab>\n          </Tabs>\n        </Paper>\n        <div style={{ height: 650 }}>\n          <DataGrid\n            pagination\n            autoPageSize\n            rows={informations.filter(\n              (info) => info.informationTag === gameNewsTag\n            )}\n            columns={columns}\n          ></DataGrid>\n        </div>\n      </Container>\n      {info ? (\n        <InfoInternalDialog\n          url={`https://production-web.sekai.colorfulpalette.org/${info.path}`}\n          open={open}\n          onClose={() => setOpen(false)}\n          title={info.title}\n        />\n      ) : null}\n    </Fragment>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}