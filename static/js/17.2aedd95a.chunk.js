(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[17],{6036:function(e,a,t){"use strict";var n=t(1),r=t(2),i=t(0),c=(t(4),t(3)),l=t(5),o=i.forwardRef((function(e,a){var t=e.classes,l=e.className,o=e.component,s=void 0===o?"div":o,m=Object(r.a)(e,["classes","className","component"]);return i.createElement(s,Object(n.a)({className:Object(c.a)(t.root,l),ref:a},m))}));a.a=Object(l.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(o)},6170:function(e,a,t){"use strict";t.r(a);var n=t(12),r=t(172),i=t(40),c=t(5994),l=t(87),o=t(6177),s=t(6166),m=t(5990),u=t(5993),d=t(6036),g=t(71),h=t(5959),f=t(6008),E=t(90),b=t(6171),v=t(6172),p=t(0),y=t.n(p),x=t(13),w=t(6037),j=t.n(w),k=t(36),_=t(6039),O=t(6040),I=t.n(O),N=t(5989),R=t(41),M={1:{bg:"bg_gacha1",feature:"img_gacha1_1"},2:{bg:"bg_gacha_rare3_ticket_2020"},3:{bg:"bg_gacha_virtualsinger_2020"},7:{bg:"bg_gacha6",feature:"img_gacha6"},8:{bg:"bg_gacha8"}},A=Object(r.a)((function(e){return{media:{paddingTop:"56.25%",cursor:"pointer"},card:{margin:e.spacing(.5)},tabpanel:{padding:e.spacing("1%",0,0,0)},subheader:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"260px"},gachaBtn:{margin:e.spacing(0,1)}}}));function B(e){var a=[];return M[e.id]?(M[e.id].bg&&a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(M[e.id].bg,".webp"),alt:"background",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(M[e.id].bg,".webp")}),M[e.id].feature&&a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(M[e.id].feature,".webp"),alt:"feature",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(M[e.id].feature,".webp")})):(a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/bg_gacha").concat(e.id,".webp"),alt:"background",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/bg_gacha").concat(e.id,".webp")}),a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/img_gacha").concat(e.id,".webp"),alt:"feature",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/img_gacha").concat(e.id,".webp")})),a}var C=function(e){var a=e.num;return y.a.createElement(p.Fragment,null,Array.from({length:a}).map((function(e,a){return y.a.createElement("img",{key:a,src:I.a,alt:"star",height:"24px"})})))};a.default=function(e){var a=e.contentTransMode,t=A(),r=Object(E.a)(),w=Object(x.g)().gachaId,O=Object(N.a)().t,I=Object(R.b)(),W=I.assetT,S=I.assetI18n,T=Object(p.useState)(),F=Object(n.a)(T,2),D=F[0],U=F[1],G=Object(k.c)("gachas"),L=Object(n.a)(G,1)[0],z=Object(p.useState)(!1),J=Object(n.a)(z,2),P=J[0],V=J[1],q=Object(p.useState)("4"),H=Object(n.a)(q,2),K=H[0],Q=H[1],X=Object(p.useState)(0),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(p.useState)({total:0,rarity1:0,rarity2:0,rarity3:0,rarity4:0}),ae=Object(n.a)(ee,2),te=ae[0],ne=ae[1],re=Object(p.useState)([]),ie=Object(n.a)(re,2),ce=ie[0],le=ie[1],oe=Object(k.f)(!1),se=Object(n.a)(oe,3),me=se[1],ue=se[2],de=Object(k.c)("cards"),ge=Object(n.a)(de,1)[0];function he(e){for(var a=e,t=[null===D||void 0===D?void 0:D.rarity1Rate,(null===D||void 0===D?void 0:D.rarity1Rate)+(null===D||void 0===D?void 0:D.rarity2Rate),(null===D||void 0===D?void 0:D.rarity1Rate)+(null===D||void 0===D?void 0:D.rarity2Rate)+(null===D||void 0===D?void 0:D.rarity3Rate),(null===D||void 0===D?void 0:D.rarity1Rate)+(null===D||void 0===D?void 0:D.rarity2Rate)+(null===D||void 0===D?void 0:D.rarity3Rate)+(null===D||void 0===D?void 0:D.rarity4Rate)],n=[100-(null===D||void 0===D?void 0:D.rarity4Rate),100],r=[null===D||void 0===D?void 0:D.gachaDetails.filter((function(e){var a;return 1===(null===(a=ge.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===D||void 0===D?void 0:D.gachaDetails.filter((function(e){var a;return 2===(null===(a=ge.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===D||void 0===D?void 0:D.gachaDetails.filter((function(e){var a;return 3===(null===(a=ge.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===D||void 0===D?void 0:D.gachaDetails.filter((function(e){var a;return 4===(null===(a=ge.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)}))],i=[],c=0,l=0;l<a;l++)if(l%10!==9||9!==c){l%10===0&&(c=0);var o,s=100*Math.random();if(s<=t[0])ne((function(e){return Object.assign({},e,{total:e.total+1,rarity1:e.rarity1+1})})),i.push(r[0][Math.floor(Math.random()*(null===(o=r[0])||void 0===o?void 0:o.length))]),c++;else if(s<=t[1]){var m;ne((function(e){return Object.assign({},e,{total:e.total+1,rarity2:e.rarity2+1})})),i.push(r[1][Math.floor(Math.random()*(null===(m=r[1])||void 0===m?void 0:m.length))]),c++}else if(s<=t[2]){var u;ne((function(e){return Object.assign({},e,{total:e.total+1,rarity3:e.rarity3+1})})),i.push(r[2][Math.floor(Math.random()*(null===(u=r[2])||void 0===u?void 0:u.length))])}else if(s<=t[3]){var d;ne((function(e){return Object.assign({},e,{total:e.total+1,rarity4:e.rarity4+1})})),i.push(r[3][Math.floor(Math.random()*(null===(d=r[3])||void 0===d?void 0:d.length))])}else console.log(s,t)}else{var g,h=100*Math.random();if(h<n[0])ne((function(e){return Object.assign({},e,{total:e.total+1,rarity3:e.rarity3+1})})),i.push(r[2][Math.floor(Math.random()*(null===(g=r[2])||void 0===g?void 0:g.length))]);else if(h<n[1]){var f;ne((function(e){return Object.assign({},e,{total:e.total+1,rarity4:e.rarity4+1})})),i.push(r[3][Math.floor(Math.random()*(null===(f=r[3])||void 0===f?void 0:f.length))])}else console.log(h,n);c=0}le(i.slice(-10))}Object(p.useEffect)((function(){ue(Boolean(L.length)),Boolean(L.length)&&U(L.find((function(e){return e.id===Number(w)})))}),[ue,w,L]),Object(p.useEffect)((function(){D&&(document.title="".concat("original"===a?D.name:"translated"===a?W("gacha_name:".concat(w),D.name):D.name," | Gacha | Sekai Viewer"))}),[D,S,a,w,W]);return me&&D?y.a.createElement(p.Fragment,null,y.a.createElement(i.a,{variant:"h6",className:r.header},"original"===a?D.name:"translated"===a?W("gacha_name:".concat(w),D.name):D.name),y.a.createElement(c.a,{className:r.content,maxWidth:"sm"},y.a.createElement(b.a,{value:K},y.a.createElement(l.a,null,y.a.createElement(o.a,{value:K,onChange:function(e,a){Q(a)},variant:"scrollable",scrollButtons:"desktop"},y.a.createElement(s.a,{label:O("gacha:tab.title[0]"),value:"2"}),y.a.createElement(s.a,{label:O("gacha:tab.title[1]"),value:"3"}),y.a.createElement(s.a,{label:O("gacha:tab.title[2]"),value:"4"}),y.a.createElement(s.a,{label:O("gacha:tab.title[3]"),value:"0"}),M[D.id]?M[D.id].feature?y.a.createElement(s.a,{label:O("gacha:tab.title[4]"),value:"1"}):null:D.id>=4?y.a.createElement(s.a,{label:O("gacha:tab.title[4]"),value:"1"}):null),y.a.createElement(v.a,{value:"0",classes:{root:t.tabpanel}},y.a.createElement(m.a,{onClick:function(){$(0),V(!0)}},y.a.createElement(u.a,{className:t.media,image:D?"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(D.assetbundleName,"/screen_rip/texture/").concat(M[D.id]?M[D.id].bg:"bg_gacha".concat(w),".webp"):""}))),y.a.createElement(v.a,{value:"1",classes:{root:t.tabpanel}},y.a.createElement(m.a,{onClick:function(){$(1),V(!0)}},y.a.createElement(u.a,{className:t.media,image:D?"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(D.assetbundleName,"/screen_rip/texture/").concat(M[D.id]?M[D.id].feature:"img_gacha".concat(w),".webp"):""}))),y.a.createElement(v.a,{value:"2",classes:{root:t.tabpanel}},y.a.createElement(m.a,null,y.a.createElement(d.a,null,D.gachaInformation.description.split("\n").map((function(e,a){return y.a.createElement(i.a,{paragraph:!0,variant:"body2",key:"desc-".concat(a)},e)}))))),y.a.createElement(v.a,{value:"3",classes:{root:t.tabpanel}},y.a.createElement(m.a,null,y.a.createElement(d.a,null,D.gachaInformation.summary.split("\n").map((function(e,a){return y.a.createElement(i.a,{paragraph:!0,variant:"body2",key:"summary-".concat(a)},e)}))))),y.a.createElement(v.a,{value:"4",classes:{root:t.tabpanel}},y.a.createElement(m.a,null,y.a.createElement(d.a,null,y.a.createElement(g.a,{container:!0,spacing:1,justify:"center"},y.a.createElement(g.a,{item:!0},y.a.createElement(h.a,{variant:"contained",className:t.gachaBtn,color:"secondary",onClick:function(){return he(1)}},"Gacha!")),y.a.createElement(g.a,{item:!0},y.a.createElement(h.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return he(10)}},"Gacha * 10")),y.a.createElement(g.a,{item:!0},y.a.createElement(h.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return ne({total:0,rarity1:0,rarity2:0,rarity3:0,rarity4:0}),void le([])}},"Reset"))),y.a.createElement(g.a,{container:!0,spacing:1,justify:"center"},y.a.createElement(g.a,{item:!0},y.a.createElement(i.a,null,"Total: ",te.total," Cost: ",300*te.total)),y.a.createElement(g.a,{item:!0,container:!0,spacing:1,justify:"center"},y.a.createElement(g.a,{item:!0},y.a.createElement(i.a,null,y.a.createElement(C,{num:2}),te.rarity2," ",te.total?(te.rarity2/te.total*100).toFixed(2):0," ","%")),y.a.createElement(g.a,{item:!0},y.a.createElement(i.a,null,y.a.createElement(C,{num:3}),te.rarity3," ",te.total?(te.rarity3/te.total*100).toFixed(2):0," ","%")),y.a.createElement(g.a,{item:!0},y.a.createElement(i.a,null,y.a.createElement(C,{num:4}),te.rarity4," ",te.total?(te.rarity4/te.total*100).toFixed(2):0," ","%"))))),y.a.createElement(d.a,null,y.a.createElement(_.c,{cardIds:ce.map((function(e){return e.cardId}))})))))),y.a.createElement(g.a,{container:!0,direction:"column"},y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:id")),y.a.createElement(i.a,null,D.id)),y.a.createElement(f.a,{style:{margin:"1% 0"}}),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:title")),y.a.createElement(i.a,null,"original"===a?D.name:"translated"===a?W("gacha_name:".concat(w),D.name):D.name)),y.a.createElement(f.a,{style:{margin:"1% 0"}}),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:icon")),y.a.createElement("img",{style:{maxWidth:"50%"},src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(D.assetbundleName,"/logo_rip/logo.webp"),alt:"logo icon"})),y.a.createElement(f.a,{style:{margin:"1% 0"}}),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:startAt")),y.a.createElement(i.a,null,new Date(D.startAt).toLocaleString())),y.a.createElement(f.a,{style:{margin:"1% 0"}}),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:endAt")),y.a.createElement(i.a,null,new Date(D.endAt).toLocaleString())),y.a.createElement(f.a,{style:{margin:"1% 0"}}),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("common:type")),y.a.createElement(i.a,null,O("gacha:gachaType.".concat(D.gachaType)))),y.a.createElement(f.a,{style:{margin:"1% 0"}}),D.gachaBehaviors.find((function(e){return"normal"===e.gachaBehaviorType}))?y.a.createElement(p.Fragment,null,y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:2,md:4},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("gacha:normalRate"))),y.a.createElement(g.a,{item:!0,xs:9,md:4,container:!0,direction:"column",alignItems:"flex-end"},y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:2})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},D.rarity2Rate," %")),y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:3})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},D.rarity3Rate," %")),y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:4})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},D.rarity4Rate," %")))),y.a.createElement(f.a,{style:{margin:"1% 0"}})):null,D.gachaBehaviors.find((function(e){return"over_rarity_3_once"===e.gachaBehaviorType}))?y.a.createElement(p.Fragment,null,y.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"space-between",alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:2,md:4},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("gacha:guaranteedRate"))),y.a.createElement(g.a,{item:!0,xs:9,md:4,container:!0,direction:"column",alignItems:"flex-end"},y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:2})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},"0 %")),y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:3})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},100-D.rarity4Rate," %")),y.a.createElement(g.a,{item:!0,container:!0,alignItems:"center"},y.a.createElement(g.a,{item:!0,xs:7,style:{textAlign:"right"}},y.a.createElement(C,{num:4})),y.a.createElement(g.a,{item:!0,xs:5,style:{textAlign:"right"}},D.rarity4Rate," %")))),y.a.createElement(f.a,{style:{margin:"1% 0"}})):null,y.a.createElement(g.a,{container:!0,wrap:"nowrap",justify:"space-between",alignItems:"center"},y.a.createElement(i.a,{variant:"subtitle1",style:{fontWeight:600}},O("gacha:pickupMember",{count:D.gachaPickups.length})),y.a.createElement(g.a,{item:!0,container:!0,direction:"row",xs:6,spacing:1,justify:"flex-end"},D.gachaPickups.map((function(e){return y.a.createElement(g.a,{key:"pickup-".concat(e.id),item:!0,xs:8,md:4},y.a.createElement(_.a,{id:e.cardId}))})))),y.a.createElement(f.a,{style:{margin:"1% 0"}}))),y.a.createElement(j.a,{visible:P,onClose:function(){return V(!1)},images:B(D),zIndex:2e3,activeIndex:Z,downloadable:!0,downloadInNewWindow:!0,onMaskClick:function(){return V(!1)},zoomSpeed:.25,onChange:function(e,a){return $(a)}})):y.a.createElement("div",null,"Loading... If you saw this for a while, gacha ",w," does not exist.")}}}]);
//# sourceMappingURL=17.2aedd95a.chunk.js.map